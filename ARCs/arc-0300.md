---
arc: 300
title: Extended URI Scheme
description: An extended specification for encoding AVM actions in a URI scheme.
author: Kieran O'Neill (@kieranroneill)
status: Draft
type: Standards Track
category: Interface
created: 2024-07-22
---

# Extended URI Scheme

## Abstract

This specification aims to supersede [ARC-0026][arc-0026] by not only replacing the structure of the URI, but also to introduce several other common AVM actions:

* Importing accounts.
* Adding an [ARC-0200][arc-0200] asset.

Furthermore, this specification also aims to comprehensively outline multiple transaction types, from sending native currency to more advanced transaction types like key registration.

<sup>[Back to top ^][top]</sup>

## Motivation

With the advent of AVM co-chains, the need for recognizing which chain and what the intent of the action is, is becoming necessary. Therefore, the structure of the URI needs to be replaced in order to allow to reflect the new flexibility that is needed.

[ARC-0026][arc-0026] is limited in scope in terms of actions as it only outlines transaction encoding. However, AVM wallets and dApps share some common actions that can also benefit from URI schemes, such as account exporting/importing.

<sup>[Back to top ^][top]</sup>

## Specification

The key words "**MUST**", "**MUST NOT**", "**REQUIRED**", "**SHALL**", "**SHALL NOT**", "**SHOULD**", "**SHOULD NOT**", "**RECOMMENDED**", "**MAY**", and "**OPTIONAL**" in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC-2119</a>.

> Comments like this are non-normative.

### Definitions

This section is non-normative.

* AVM
  - An acronym for Algorand Virtual Machine that represents the underlying blockchain technology (chain) rather than the network (Algorand, Voi etc.).

<sup>[Back to top ^][top]</sup>

### Basic Structure

The basic structure attempts to adhere to the URI structure set out in [RFC-3986][rfc-3986] by incorporating the same terminology. 

The structure is made up of four parts:

* **Scheme** - this **MUST** be `avm` and acts as the identifier for the URI. It ensures that the URI is recognized as a URI that belongs to the AVM ecosystem.
* **Authority** - this **MUST** be a noun and determines the category to which the intent belongs to.
* **Path** - this **MUST** be a verb that determines what the actual action of the intent is.
* **Query** - is non-hierarchical data that allows for customization of the action. Each parameter is separated by an ampersand ("&").

Below is an example of a URI that imports an account: 

```
 avm://account/import?privatekey=pBp...
 \_/   \_____/ \____/ \_______________/
  |       |       |           |   
scheme authority path       query 
```

<sup>[Back to top ^][top]</sup>

### Supported Schemes

#### Account Import

The account import action allows accounts to be encoded and imported.

See [here](#account-import-example) for examples.

> üö® **WARNING:** Be aware that this action uses private keys in plain text.

URI:

| Authority | Path     | Example                |
|:----------|:---------|:-----------------------|
| `account` | `import` | `avm://account/import` |

Queries:

| Query         | Descriptions                                                                                                                                                                                                                                                                                                                                                                        |
|:--------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `name`        | Represents a name for the account. This is not part of a previous specification and is not enforced, it merely allows for dApps/wallets to communicate some custom names for accounts.                                                                                                                                                                                              |
| `page`        | This represents the pagination of the scheme. This is used to allow an _n_ number accounts to be imported as the amount of accounts that appear in a URI is limited to 5. This param is especially useful when using with QR codes and allows multiple QR codes to appear in a loop and the corresponding reader can parse the amount of accounts that are intended to be imported. |
| `privatekey`  | This is the encoded 32-byte private key (or seed) of the account.                                                                                                                                                                                                                                                                                                                   |

where:
* `name`:
  - **OPTIONAL** can be omitted.
  - **MUST** be encoded using percent (URL) ([RFC 3986 section 2][rfc-3986-section-2]) encoding.
  - **MUST** be limited to 32 unicode characters, including whitespace.
  - **MAY** include more than one param in the URI, but no more than 5 in order to limit the size of the URI.
* `page`:
  - **OPTIONAL** is not necessary when importing at most 5 accounts.
  - **MUST** in the form of X:Y where X represents the count and Y represents the total.
* `privatekey`:
  - **REQUIRED** at least one private key param **MUST** be present.
  - **MUST** be the encoded 32-byte private key of the account.
  - **MUST** be encoded using base64 URL safe ([RFC 4648 section 5][rfc-4648-section-5]) encoding.
  - **MAY** include more than one param in the URI, but no more than 5 in order to limit the size of the URI.

> ‚ö†Ô∏è **NOTE:** If there is more than one `name` and/or `privatekey` params, the order of which they appear represents the index of the param as an array. See [this](#multiple-accounts) example.

<sup>[Back to top ^][top]</sup>

## Rationale

An original vision for Algorand was that multiple AVM chains would co-exist. This vision is starting to be realized and, as such, ensuring a URI scheme that represents the agnosticism of the chain allows for a more cohesive implementation across each AVM network. 

The specification is more expanded in terms of actions available than [ARC-0026][arc-0026], which only implements transaction encoding. The need for more actions has been born out of wallets/dApps needing simpler ways in interacting with each other. Using URI schemes (and subsequently QR codes) allows seamless transmission of data without a centralized medium and/or overhead. 

<sup>[Back to top ^][top]</sup>

## Reference Implementation

### Account Import Example

#### Single Account

```
avm://account/import?name=Personal&privatekey=pBpzPQoA9XEypuBj81UTAiYDTiSk_TbOEVHwpNmmowo=
```

#### Multiple Accounts

```
avm://account/import?name=Personal&privatekey=pBpzPQoA9XEypuBj81UTAiYDTiSk_TbOEVHwpNmmowo=&name=Another%20Account&privatekey=mBukXDkoqfGLIPILvuusG8kU_VN8PAPu513Q7MmDSZQ=
```

#### Multiple Accounts With Pagination

```
avm://account/import?name=Account%201&privatekey=pBpzPQoA9XEypuBj81UTAiYDTiSk_TbOEVHwpNmmowo=&name=Account%202&privatekey=mBukXDkoqfGLIPILvuusG8kU_VN8PAPu513Q7MmDSZQ=&name=Account%203&privatekey=UuS5IKJaj8EyV2QBrLd8l3EM-11HPZ7xc3vLYQsSacs=&name=Account%204&privatekey=T90BoTDd0FGOp2WS5rFe4vmEsJHWhWMvi-roYxvIP_Q=&name=Account%205&privatekey=3hi6O00ED8ybzzowsGvee7YP7Mm_1oUIbTEZvFX0yTo=&page=1:2
```

<sup>[Back to top ^][top]</sup>

## Security Considerations

As this ARC only serves as the formalization of the URI scheme. 

For most data, encryption is not necessary, however, the account import action exposes the private key of accounts. This needs to be taken into consideration when implementing this action within an application.

<sup>[Back to top ^][top]</sup>

## Copyright
Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CCO</a>.

<sup>[Back to top ^][top]</sup>

<!-- Links -->
[arc-0026]: ./arc-0026.md#specification
[arc-0200]: ./arc-0200.md#specification
[rfc-3986]: https://datatracker.ietf.org/doc/html/rfc3986
[rfc-3986-section-2]: https://datatracker.ietf.org/doc/html/rfc3986#section-2
[rfc-4648-section-5]: https://datatracker.ietf.org/doc/html/rfc4648#section-5
[top]: #extended-uri-scheme
